{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(search, page) {\n  try {\n    const responce = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '49368815-3bbcd5bcef21230b847f53bd6',\n        q: search,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page,\n      },\n    });\n    return responce.data;\n  } catch (error) {\n    return [];\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst modals = new SimpleLightbox('a.gallery-link', { captionsData: 'alt' });\nconst gallery = document.querySelector('ul.gallery');\nconst loader = document.querySelector('div.loader');\nconst loadButton = document.querySelector('button.load_button');\n\nexport function renderImages(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n          <ul class=\"gallery-list\">\n          <li class=\"gallery-list-item\">\n          <p class=\"gallery-list-item-text\">Likes</p>\n          <p class=\"gallery-list-item-value\">${likes}</p>\n          </li>\n           <li class=\"gallery-list-item\">\n          <p class=\"gallery-list-item-text\">Views</p>\n          <p class=\"gallery-list-item-value\">${views}</p>\n          </li>\n           <li class=\"gallery-list-item\">\n          <p class=\"gallery-list-item-text\">Comments</p>\n          <p class=\"gallery-list-item-value\">${comments}</p>\n          </li>\n           <li class=\"gallery-list-item\">\n          <p class=\"gallery-list-item-text\">Downloads</p>\n          <p class=\"gallery-list-item-value\">${downloads}</p>\n          </li>\n          </ul></a></li>`;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  modals.refresh();\n}\n\nexport function renderLastPageNotification() {\n  iziToast.message({\n    message: 'We are sorry, but you have reached the end of search results.',\n    position: 'topRight',\n  });\n}\n\nexport function renderError() {\n  iziToast.error({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n  });\n}\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function scrollGallery() {\n  const galleryItem = document.querySelector('li.gallery-item');\n  const height = galleryItem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: height * 2,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadButton() {\n  loadButton.classList.remove('hidden');\n}\n\nexport function hideLoadButton() {\n  loadButton.classList.add('hidden');\n}\n","import { getImages } from './js/pixabay-api';\nimport {\n  renderImages,\n  renderLastPageNotification,\n  renderError,\n  clearGallery,\n  scrollGallery,\n  showLoader,\n  hideLoader,\n  showLoadButton,\n  hideLoadButton,\n} from './js/render-functions';\n\nlet page = 1;\nlet search = '';\nconst loadButton = document.querySelector('button.load_button');\n\nasync function updateGallery() {\n  showLoader();\n  const { hits, totalHits } = await getImages(search, page);\n  const totalPages = Math.ceil(totalHits / 15);\n  hideLoader();\n  if (hits.length === 0) {\n    renderError();\n  } else {\n    renderImages(hits);\n    if (page > 1) {\n      scrollGallery();\n    }\n    if (page == totalPages) {\n      hideLoadButton();\n      renderLastPageNotification();\n    } else {\n      showLoadButton();\n    }\n  }\n}\n\nconst form = document.querySelector('form');\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  hideLoadButton();\n  const data = new FormData(event.target);\n  const searchText = data.get('search-text');\n  if (searchText === '') {\n    return;\n  }\n\n  search = searchText;\n  page = 1;\n\n  clearGallery();\n  updateGallery();\n});\n\nloadButton.addEventListener('click', async event => {\n  page += 1;\n  updateGallery();\n});\n"],"names":["getImages","search","page","axios","modals","SimpleLightbox","gallery","loader","loadButton","renderImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderLastPageNotification","iziToast","renderError","clearGallery","scrollGallery","height","showLoader","hideLoader","showLoadButton","hideLoadButton","updateGallery","hits","totalHits","totalPages","form","event","searchText"],"mappings":"owBAEO,eAAeA,EAAUC,EAAQC,EAAM,CAC5C,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACP,CACP,CAAK,GACe,IACjB,MAAe,CACd,MAAO,EACR,CACH,CCdA,MAAME,EAAS,IAAIC,EAAe,iBAAkB,CAAE,aAAc,KAAK,CAAE,EACrEC,EAAU,SAAS,cAAc,YAAY,EAC7CC,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAa,SAAS,cAAc,oBAAoB,EAEvD,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,0CAC2BL,CAAa;AAAA,4CACXD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,+CAIvBC,CAAK;AAAA;AAAA;AAAA;AAAA,+CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,+CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,+CAIRC,CAAS;AAAA;AAAA,yBAInD,EACA,KAAK,EAAE,EAEVZ,EAAQ,mBAAmB,YAAaK,CAAM,EAC9CP,EAAO,QAAO,CAChB,CAEO,SAASe,GAA6B,CAC3CC,EAAS,QAAQ,CACf,QAAS,gEACT,SAAU,UACd,CAAG,CACH,CAEO,SAASC,GAAc,CAC5BD,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UACd,CAAG,CACH,CACO,SAASE,GAAe,CAC7BhB,EAAQ,UAAY,EACtB,CAEO,SAASiB,GAAgB,CAE9B,MAAMC,EADc,SAAS,cAAc,iBAAiB,EACjC,sBAAqB,EAAG,OACnD,OAAO,SAAS,CACd,IAAKA,EAAS,EACd,KAAM,EACN,SAAU,QACd,CAAG,CACH,CAEO,SAASC,GAAa,CAC3BlB,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEO,SAASmB,GAAa,CAC3BnB,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEO,SAASoB,GAAiB,CAC/BnB,EAAW,UAAU,OAAO,QAAQ,CACtC,CAEO,SAASoB,GAAiB,CAC/BpB,EAAW,UAAU,IAAI,QAAQ,CACnC,CChFA,IAAIN,EAAO,EACPD,EAAS,GACb,MAAMO,EAAa,SAAS,cAAc,oBAAoB,EAE9D,eAAeqB,GAAgB,CAC7BJ,IACA,KAAM,CAAE,KAAAK,EAAM,UAAAC,CAAW,EAAG,MAAM/B,EAAUC,EAAQC,CAAI,EAClD8B,EAAa,KAAK,KAAKD,EAAY,EAAE,EAC3CL,IACII,EAAK,SAAW,EAClBT,KAEAZ,EAAaqB,CAAI,EACb5B,EAAO,GACTqB,IAEErB,GAAQ8B,GACVJ,IACAT,KAEAQ,IAGN,CAEA,MAAMM,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,iBAAiB,SAAU,MAAMC,GAAS,CAC7CA,EAAM,eAAc,EAEpBN,IAEA,MAAMO,EADO,IAAI,SAASD,EAAM,MAAM,EACd,IAAI,aAAa,EACrCC,IAAe,KAInBlC,EAASkC,EACTjC,EAAO,EAEPoB,IACAO,IACF,CAAC,EAEDrB,EAAW,iBAAiB,QAAS,MAAM0B,GAAS,CAClDhC,GAAQ,EACR2B,GACF,CAAC"}